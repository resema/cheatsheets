<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1001px" preserveAspectRatio="none" style="width:1115px;height:1001px;background:#FFFFFF;" version="1.1" viewBox="0 0 1115 1001" width="1115px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="34.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="352" y="793.2188"/><rect fill="#FFFFFF" height="34.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="352" y="864.4844"/><rect fill="none" height="159.6641" style="stroke:#000000;stroke-width:1.5;" width="805" x="293" y="746.9531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="63" x2="63" y1="67.2969" y2="923.6172"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="210" x2="210" y1="67.2969" y2="923.6172"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="357" x2="357" y1="67.2969" y2="923.6172"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="491.5" x2="491.5" y1="67.2969" y2="923.6172"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="601.5" x2="601.5" y1="67.2969" y2="923.6172"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="877" x2="877" y1="67.2969" y2="923.6172"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="967" x2="967" y1="67.2969" y2="923.6172"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1060" x2="1060" y1="67.2969" y2="923.6172"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="5" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="12" y="55.9951">Lightning App</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="5" y="922.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="12" y="942.6123">Lightning App</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148" x="136" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="143" y="55.9951">Lightning Gateway</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="148" x="136" y="922.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="143" y="942.6123">Lightning Gateway</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="108" x="303" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="310" y="55.9951">Design Order</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="108" x="303" y="922.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="310" y="942.6123">Design Order</text><path d="M439.5,24.7031 L544.5,24.7031 C549.5,24.7031 549.5,46 549.5,46 C549.5,46 549.5,67.2969 544.5,67.2969 L439.5,67.2969 C434.5,67.2969 434.5,46 434.5,46 C434.5,46 434.5,24.7031 439.5,24.7031 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M544.5,24.7031 C539.5,24.7031 539.5,46 539.5,46 C539.5,67.2969 544.5,67.2969 544.5,67.2969 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="439.5" y="42.6982">Event Queue</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="452.5" y="58.9951">(Fallback)</text><path d="M439.5,922.6172 L544.5,922.6172 C549.5,922.6172 549.5,943.9141 549.5,943.9141 C549.5,943.9141 549.5,965.2109 544.5,965.2109 L439.5,965.2109 C434.5,965.2109 434.5,943.9141 434.5,943.9141 C434.5,943.9141 434.5,922.6172 439.5,922.6172 " fill="#E2E2F0" style="stroke:#181818;stroke-width:0.5;"/><path d="M544.5,922.6172 C539.5,922.6172 539.5,943.9141 539.5,943.9141 C539.5,965.2109 544.5,965.2109 544.5,965.2109 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="91" x="439.5" y="940.6123">Event Queue</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="69" x="452.5" y="956.9092">(Fallback)</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="559.5" y="63.9951">Repository</text><path d="M584,15 C584,5 602,5 602,5 C602,5 620,5 620,15 L620,41 C620,51 602,51 602,51 C602,51 584,51 584,41 L584,15 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M584,15 C584,25 602,25 602,25 C602,25 620,25 620,15 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="559.5" y="935.6123">Repository</text><path d="M584,948.9141 C584,938.9141 602,938.9141 602,938.9141 C602,938.9141 620,938.9141 620,948.9141 L620,974.9141 C620,984.9141 602,984.9141 602,984.9141 C602,984.9141 584,984.9141 584,974.9141 L584,948.9141 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M584,948.9141 C584,958.9141 602,958.9141 602,958.9141 C602,958.9141 620,958.9141 620,948.9141 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="852" y="63.9951">Entity</text><ellipse cx="877" cy="35" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="865" x2="889" y1="49" y2="49"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="852" y="935.6123">Entity</text><ellipse cx="877" cy="954.9141" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="865" x2="889" y1="968.9141" y2="968.9141"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="912" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="919" y="55.9951">Collaboration</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="912" y="922.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="919" y="942.6123">Collaboration</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="1033" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="1040" y="55.9951">Order</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="55" x="1033" y="922.6172"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41" x="1040" y="942.6123">Order</text><rect fill="#FFFFFF" height="34.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="352" y="793.2188"/><rect fill="#FFFFFF" height="34.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="352" y="864.4844"/><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1108" x="0" y="97.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1108" y1="97.8633" y2="97.8633"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1108" y1="100.8633" y2="100.8633"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="114" x="497" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="95" x="503" y="103.3638">Initialization</text><line style="stroke:#181818;stroke-width:1.0;" x1="357" x2="399" y1="141.5625" y2="141.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="399" x2="399" y1="141.5625" y2="154.5625"/><line style="stroke:#181818;stroke-width:1.0;" x1="358" x2="399" y1="154.5625" y2="154.5625"/><polygon fill="#181818" points="368,150.5625,358,154.5625,368,158.5625,364,154.5625" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="364" y="136.4966">RunEventPubSub</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1108" x="0" y="183.1289"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1108" y1="183.1289" y2="183.1289"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1108" y1="186.1289" y2="186.1289"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="174" x="467" y="172.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="155" x="473" y="188.6294">Design Order Create</text><polygon fill="#181818" points="198,222.8281,208,226.8281,198,230.8281,202,226.8281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="63" x2="204" y1="226.8281" y2="226.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="70" y="221.7622">CreateDesignOrder</text><polygon fill="#181818" points="345,251.9609,355,255.9609,345,259.9609,349,255.9609" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="210" x2="351" y1="255.9609" y2="255.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="217" y="250.895">CreateDesignOrder</text><line style="stroke:#181818;stroke-width:1.0;" x1="357" x2="399" y1="285.0938" y2="285.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="399" x2="399" y1="285.0938" y2="298.0938"/><line style="stroke:#181818;stroke-width:1.0;" x1="358" x2="399" y1="298.0938" y2="298.0938"/><polygon fill="#181818" points="368,294.0938,358,298.0938,368,302.0938,364,298.0938" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="364" y="280.0278">createDesignOrder</text><polygon fill="#181818" points="480,323.2266,490,327.2266,480,331.2266,484,327.2266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="357" x2="486" y1="327.2266" y2="327.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109" x="364" y="322.1606">publishToPubSub</text><polygon fill="#181818" points="590,352.3594,600,356.3594,590,360.3594,594,356.3594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="357" x2="596" y1="356.3594" y2="356.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="364" y="351.2935">CreateDesignOrder</text><polygon fill="#181818" points="865,381.4922,875,385.4922,865,389.4922,869,385.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="602" x2="871" y1="385.4922" y2="385.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="609" y="380.4263">addAction(CreateShare)</text><polygon fill="#181818" points="865,410.625,875,414.625,865,418.625,869,414.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="602" x2="871" y1="414.625" y2="414.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="609" y="409.5591">addAction(CreateOrder)</text><polygon fill="#181818" points="865,439.7578,875,443.7578,865,447.7578,869,443.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="602" x2="871" y1="443.7578" y2="443.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="609" y="438.6919">addAction(OrderUpdateNotify)</text><polygon fill="#181818" points="865,468.8906,875,472.8906,865,476.8906,869,472.8906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="602" x2="871" y1="472.8906" y2="472.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209" x="609" y="467.8247">addAction(OrderUpdateEmailGP)</text><polygon fill="#181818" points="865,498.0234,875,502.0234,865,506.0234,869,502.0234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="602" x2="871" y1="502.0234" y2="502.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="246" x="609" y="496.9575">addAction(OrderUpdateNotificationGP)</text><polygon fill="#181818" points="865,527.1563,875,531.1563,865,535.1563,869,531.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="602" x2="871" y1="531.1563" y2="531.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214" x="609" y="526.0903">addAction(OrderUpdateEmailLab)</text><polygon fill="#181818" points="865,556.2891,875,560.2891,865,564.2891,869,560.2891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="602" x2="871" y1="560.2891" y2="560.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="251" x="609" y="555.2231">addAction(OrderUpdateNotificationLab)</text><polygon fill="#181818" points="865,585.4219,875,589.4219,865,593.4219,869,589.4219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="602" x2="871" y1="589.4219" y2="589.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="609" y="584.356">createRequestMetaBlob</text><line style="stroke:#181818;stroke-width:1.0;" x1="602" x2="644" y1="618.5547" y2="618.5547"/><line style="stroke:#181818;stroke-width:1.0;" x1="644" x2="644" y1="618.5547" y2="631.5547"/><line style="stroke:#181818;stroke-width:1.0;" x1="603" x2="644" y1="631.5547" y2="631.5547"/><polygon fill="#181818" points="613,627.5547,603,631.5547,613,635.5547,609,631.5547" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="609" y="613.4888">createEvent</text><polygon fill="#181818" points="590,656.6875,600,660.6875,590,664.6875,594,660.6875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="357" x2="596" y1="660.6875" y2="660.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="364" y="655.6216">ProcessAndUpdateEvents</text><line style="stroke:#181818;stroke-width:1.0;" x1="602" x2="644" y1="689.8203" y2="689.8203"/><line style="stroke:#181818;stroke-width:1.0;" x1="644" x2="644" y1="689.8203" y2="702.8203"/><line style="stroke:#181818;stroke-width:1.0;" x1="603" x2="644" y1="702.8203" y2="702.8203"/><polygon fill="#181818" points="613,698.8203,603,702.8203,613,706.8203,609,702.8203" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="609" y="684.7544">getByDesignOrder</text><polygon fill="#181818" points="368,727.9531,358,731.9531,368,735.9531,364,731.9531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="362" x2="601" y1="731.9531" y2="731.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="374" y="726.8872">processEvents</text><path d="M293,746.9531 L467,746.9531 L467,754.0859 L457,764.0859 L293,764.0859 L293,746.9531 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="159.6641" style="stroke:#000000;stroke-width:1.5;" width="805" x="293" y="746.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="129" x="308" y="760.02">forloop ACTIONS</text><line style="stroke:#181818;stroke-width:1.0;" x1="357" x2="404" y1="780.2188" y2="780.2188"/><line style="stroke:#181818;stroke-width:1.0;" x1="404" x2="404" y1="780.2188" y2="793.2188"/><line style="stroke:#181818;stroke-width:1.0;" x1="363" x2="404" y1="793.2188" y2="793.2188"/><polygon fill="#181818" points="373,789.2188,363,793.2188,373,797.2188,369,793.2188" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="369" y="775.1528">createShare</text><polygon fill="#181818" points="955.5,823.3516,965.5,827.3516,955.5,831.3516,959.5,827.3516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="357" x2="961.5" y1="827.3516" y2="827.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="364" y="822.2856">CreateShare</text><line style="stroke:#181818;stroke-width:1.0;" x1="357" x2="404" y1="851.4844" y2="851.4844"/><line style="stroke:#181818;stroke-width:1.0;" x1="404" x2="404" y1="851.4844" y2="864.4844"/><line style="stroke:#181818;stroke-width:1.0;" x1="363" x2="404" y1="864.4844" y2="864.4844"/><polygon fill="#181818" points="373,860.4844,363,864.4844,373,868.4844,369,864.4844" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="369" y="846.4185">createOrder</text><polygon fill="#181818" points="1048.5,894.6172,1058.5,898.6172,1048.5,902.6172,1052.5,898.6172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="357" x2="1054.5" y1="898.6172" y2="898.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="364" y="893.5513">CreateOrder</text><!--MD5=[07df8b261784f3287ed3f9391d919494]
@startuml
participant "Lightning App" as ligapp
participant "Lightning Gateway" as gateway
participant "Design Order" as design
queue "Event Queue \n(Fallback)" as events
database "Repository" as dorepo
entity "Entity" as doent
participant "Collaboration" as collab
participant "Order" as order

== Initialization ==
design -> design : RunEventPubSub
== Design Order Create ==
ligapp -> gateway : CreateDesignOrder
gateway -> design : CreateDesignOrder
design -> design : createDesignOrder
design -> events : publishToPubSub
design -> dorepo : CreateDesignOrder
dorepo -> doent : addAction(CreateShare)
dorepo -> doent : addAction(CreateOrder)
dorepo -> doent : addAction(OrderUpdateNotify)
dorepo -> doent : addAction(OrderUpdateEmailGP)
dorepo -> doent : addAction(OrderUpdateNotificationGP)
dorepo -> doent : addAction(OrderUpdateEmailLab)
dorepo -> doent : addAction(OrderUpdateNotificationLab)
dorepo -> doent : createRequestMetaBlob
dorepo -> dorepo : createEvent
design - -> dorepo : ProcessAndUpdateEvents
dorepo -> dorepo : getByDesignOrder
dorepo -> design : processEvents

group forloop ACTIONS
    design -> design : createShare
    activate design
    design -> collab : CreateShare
    deactivate design
    design -> design : createOrder
    activate design
    design -> order :  CreateOrder
    deactivate design
end
@enduml

PlantUML version 1.2022.8beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>